
<html>

  <head>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Service utilisateurs</title>
  
  </head>
  
  <body>
    <div id="back"> </div>
    
    <h1>Welcome!</h1>
    
    <br> <hr> <br><br>
    
  <div class="container">
    <button id="add" class="btn btn-dark">ADD USER</button><br><br>
    <form action="/users/add" method="post"  id="formulaire">
      <input type="text" name="username" placeholder="username" id="username2" class="form-control"><br>
      <input type="email" name="email" placeholder="Email" id="email2" class="form-control"> <br>
      <input type="password" name="password" placeholder="Password" id="password2" class="form-control"> <br>
      <input type="text" id="role2" placeholder="role">
      <br>
      <button class="btn btn-primary" type="submit" id="ajout">Ajouter</button>
    </form>
  


  <div class="container2">
    <button id="upd" class="btn btn-dark">UPDATE USER</button><br>
    <form class="form-group" method="POST"  id="update">
    
    <!--modifier un utilisateur -->
          <input type="text" name="id" id="id1" placeholder="Identifiant" class="form-control"> 
          <input class="form-control" type="text" name="username" id="username1" placeholder="Username">
          <input class="form-control" type="email" name="email" id="email1" placeholder="Email">
          <input class="form-control" type="password" name="password" id="password1" placeholder="Password">
          <input type="text" id="role1" placeholder="role">
          <br>
       <button class="btn btn-primary" id="boutton" type="submit" >modifier</button>
    </form>

  </div>
  <hr>
  
  <!-- the table -->
  <h2>Liste des utilisateurs</h2> <br>
  <table class="table table-striped">
    <tr>
      <th>id</th>
      <th>USERNAME</th>
      <th>EMAIL</th>
      <th>PASSWORD</th>
      <th>ROLE</th>
      <th></th>
      <th></th>
    </tr>
  </table>
  
  </div>

    
    <script>
      function modify(){
        document.getElementById("update").setAttribute('action', "/users/"+e.id)

      }

/***********les boutons**************/

$('#add').click(()=>{
      $('#formulaire').slideToggle();
      })
$('#formulaire').slideUp();

////
$('#upd').click(()=>{
      $('#update').slideToggle();
      })
$('#update').slideUp();
/***********************************/


//// update
    $('#boutton').click(e=>{
e.preventDefault();
let id = $('#id1').val();
console.log(id);
$.ajax({
url: 'http://localhost:3000/users/'+id,
type: 'PUT',
data:{id: $('#id1').val() , username : $('#username1').val() ,email : $('#email1').val(), password : $('#password1').val() , role : $('#role1').val()},
success: function(result) {}
});location.reload();
})

/// add
$('#ajout').click(e=>{
e.preventDefault();


$.ajax({
url: 'http://localhost:3000/users/add',
type: 'POST',
data:{ username : $('#username2').val() ,email : $('#email2').val(), password : $('#password2').val() , role : $('#role2').val()},
success: function(result) {}
});location.reload();
})
    </script>
  <script src="javascripts/fetch.js"></script>
  </body>
  
  </html>
  
  
  